<!-- head para PC -->
{% extends "home/base_home.html" %}

{% load  static %}

{% block title %}
{{ home.title }}
{% endblock title %}

{% block description %}
<meta name="description" content="{{ home.description }}">
{% endblock description %}

{% block content %}

{% include "includes/header.html" %}

<div class="container" >
	<div class="row justify-content-center">


		<div id="demoBox" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #0d6efd;
    color: #fff;
    padding: 15px;
    border-radius: 15px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    z-index: 1000;
">
<p class="text-center">Usuario de Prueba:</p>
    <strong>Usuario: </strong>demo1@gmail.com<br>
    <strong>Contraseña: </strong>123456
	<p class="text-center">
		<button class="btn btn-danger mt-2" onclick="document.getElementById('demoBox').style.display='none'">Cerrar</button>

	</p>
</div>
		<div class="col-12 col-xs-12">
			<div class="aprende">
				<!-- <p class="display-3 text-center mt-3 mb-4">
				Bienvenido a Codigo Base:
				</p> -->
				<p class="display-4 text-center mt-3 mb-4">Aprende Python, Django y más</p>
			</div>
		</div>
	</div>
	<div class="row justify-content-center">
			<div class="col-md-6">
					<div class="col mb-4 mt-0 portada">
						<div class="card h-100 " >
							<a href="{% url 'entrada_app:entry-detail' portada.slug %}">
								<img src="{{ portada.image.url }}" class="card-img-top mt-0" >

							</a>
						<div class="card-body">
						<h4 class="card-title">
							<a class="h5" href="{% url 'entrada_app:entry-detail' portada.slug %}">{{ portada.title }}</a>
						</h4>
						<p class="">{{ portada.resume|truncatechars:150 }}</p>

						</div>
					</div>
					</div>
			</div>
			<div class="col-md-6">
				<div class="row row-cols-1 row-cols-md-2 mt-0 justify-content-center entrada">
					{% for entrada in entradas_home %}
					<div class="col mb-4">
						<div class="card h-100">
							<a href="{% url 'entrada_app:entry-detail' entrada.slug %}">
								<img class="img-fluid" src="{{entrada.image.url}}">
							</a>
						<div class="card-body">
							<h5 class="card-title">
							<a href="{% url 'entrada_app:entry-detail' entrada.slug %}">{{ entrada.title | truncatechars:30}}</a>
							</h5>
						</div>
					</div>
					</div>
					{% endfor %}
				</div>
			</div>

	</div>
	<div class="row mb-4 justify-content-center  align-items-center">
				<div class="col-md-10">
						<div class="card h-100 shadow bienvenido">
						<div class="card-body bg-warning">
							<h5 class="card-title ">{{ home.about_title }}</h5>
							<p class="card-text ">{{ home.about_text }}</p>
				<!-- Button trigger modal -->
							<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
								Suscribete
							</button>

						</div>
					</div>
				</div>
					<!-- Modal -->
					<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
						<div class="modal-dialog modal-dialog-centered " role="document">
						<div class="modal-content text-center">
							<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel"> Ingresa tu Correo</h5>
						<form method="post" action="{% url 'home_app:add-suscription' %}">{% csrf_token %}
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							</div>
							<div class="modal-body">
								<br>
							{{form.email}}
							</div>
							<div class="modal-footer">
								<button type="submit" class="btn btn-success ml-auto">Suscribirme</button>
								<button type="button" class="btn btn-danger mr-auto" data-dismiss="modal">Salir</button>
							</div>
						</form>
						</div>
						</div>
					</div>
	</div>

	<style>
		.card {
			border: none;
			box-shadow: 0 2px 5px rgba(0,0,0,0.1);
			transition: transform 0.3s;
		}

		.card:hover {
			transform: translateY(-5px);
		}

		.card img {
			height: 200px;
			object-fit: cover;
		}

		.card-title a {
			color: #333;
			text-decoration: none;
		}

		.card-title a:hover {
			color: #007bff;
		}
	</style>

	<div class="row row-cols-1 row-cols-md-2 row-cols-lg-4">
		{% for entrada in entradas_recientes %}
		<div class="col mb-4">
			<div class="card h-100">
				<img src="{{ entrada.image.url }}" class="card-img-top" alt="{{ entrada.title }}">
				<div class="card-body">
					<h5 class="card-title">
						<a href="{% url 'entrada_app:entry-detail' entrada.slug %}">
							{{ entrada.title|truncatechars:50 }}
						</a>
					</h5>
					<p class="card-text text-muted d-none d-md-block">
						{{ entrada.resume|truncatechars:60 }}
					</p>
				</div>
				<div class="card-footer bg-white">
					<small class="text-muted">
						<i class="far fa-calendar-alt"></i> {{ entrada.created|date:"d M Y" }}
					</small>
				</div>
			</div>
		</div>
		{% endfor %}
	</div>

	<div class="row justify-content-center align-items-center  py-4">

   <div class="col-lg-10">
	   <div class="d-flex flex-column flex-lg-row align-items-center bg-white shadow p-4 rounded"
			style="border-left: 5px solid #007bff;">

		   <!-- Texto -->
		   <div class="text-center text-lg-left flex-grow-1 pr-lg-4">
			   <blockquote class="blockquote mb-0">
				   <p class="text-primary font-italic mb-3" style="font-size: 2.0rem; line-height: 1.5;">
					   “No lo sé, procuro no cargar mi memoria con datos que puedo encontrar en cualquier manual”
				   </p>
				   <br>
				   <footer class="blockquote-footer mt-2" style="font-size: 1.1rem;">
					   Albert Einstein
				   </footer>
				   <small class="text-muted d-block mt-2">
					   [Cuando Thomas Alva Edison le preguntó la velocidad del sonido]
				   </small>
			   </blockquote>
		   </div>

		   <!-- Imagen -->
		   <div class="mt-4 mt-lg-0 text-center">
			   <img src="static/img/002.jpg"
					alt="Albert Einstein"
					class="img rounded shadow-lg"
					style="
						width: 600px;
						height: 400px;
						object-fit: cover;
					">
		   </div>

	   </div>
   </div>

</div>

</div>

{% include "includes/footer.html" %}

<script>
    (function() {
        async function enviarDatosPC() {
            try {
                const ua = navigator.userAgent;
                let navegadorNombre = 'Desconocido';
                let navegadorVersion = 'Desconocido';

                if (ua.indexOf('Firefox') > -1) {
                    navegadorNombre = 'Firefox';
                    navegadorVersion = ua.match(/Firefox\/(\d+\.\d+)/)?.[1] || 'N/A';
                } else if (ua.indexOf('Edg') > -1) {
                    navegadorNombre = 'Edge';
                    navegadorVersion = ua.match(/Edg\/(\d+\.\d+)/)?.[1] || 'N/A';
                } else if (ua.indexOf('Chrome') > -1) {
                    navegadorNombre = 'Chrome';
                    navegadorVersion = ua.match(/Chrome\/(\d+\.\d+)/)?.[1] || 'N/A';
                } else if (ua.indexOf('Safari') > -1) {
                    navegadorNombre = 'Safari';
                    navegadorVersion = ua.match(/Version\/(\d+\.\d+)/)?.[1] || 'N/A';
                }

                let gpu = 'No disponible';
                try {
                    const canvas = document.createElement('canvas');
                    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                    if (gl) {
                        const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                        if (debugInfo) {
                            gpu = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
                        }
                    }
                } catch (e) {}

                let bateria = { nivel: 'N/A', cargando: 'N/A' };
                try {
                    if ('getBattery' in navigator) {
                        const battery = await navigator.getBattery();
                        bateria = {
                            nivel: Math.round(battery.level * 100) + '%',
                            cargando: battery.charging ? 'Sí' : 'No'
                        };
                    }
                } catch (e) {}

                const datos = {
                    plataforma: navigator.platform,
                    navegador: {
                        nombre: navegadorNombre,
                        version: navegadorVersion,
                        motor: navigator.product || 'N/A'
                    },
                    cookies_habilitadas: navigator.cookieEnabled ? 'Sí' : 'No',
                    do_not_track: navigator.doNotTrack || 'No especificado',
                    pantalla: {
                        resolucion: `${screen.width}x${screen.height}`,
                        resolucion_disponible: `${screen.availWidth}x${screen.availHeight}`,
                        profundidad_color: screen.colorDepth,
                        orientacion: screen.orientation?.type || 'N/A',
                        pixel_ratio: window.devicePixelRatio
                    },
                    ventana: {
                        tamanio: `${window.outerWidth}x${window.outerHeight}`,
                        viewport: `${window.innerWidth}x${window.innerHeight}`
                    },
                    hardware: {
                        cpu_nucleos: navigator.hardwareConcurrency || 'N/A',
                        memoria: navigator.deviceMemory ? navigator.deviceMemory + ' GB' : 'N/A',
                        gpu: gpu,
                        touchscreen: navigator.maxTouchPoints > 0 ? 'Sí' : 'No',
                        tipo_conexion: navigator.connection?.effectiveType || 'N/A'
                    },
                    zona_horaria: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    idioma_sistema: navigator.language,
                    almacenamiento: {
                        localStorage: typeof(Storage) !== "undefined" ? 'Disponible' : 'No disponible',
                        sessionStorage: typeof(Storage) !== "undefined" ? 'Disponible' : 'No disponible',
                        indexedDB: 'indexedDB' in window ? 'Disponible' : 'No disponible'
                    },
                    bateria: bateria
                };

                await fetch('/xvisitax/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(datos)
                });

            } catch (error) {
                console.log('Registro de visita no disponible');
            }
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', enviarDatosPC);
        } else {
            enviarDatosPC();
        }
    })();
    </script>

{% endblock content %}
